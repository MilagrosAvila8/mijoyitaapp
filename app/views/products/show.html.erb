 <h1>Products#show</h1>
<p>Find me in app/views/products/show.html.erb</p>

<% if current_user.role == "vendedor" %>
    <div>
      <h2><%= @product.name %></h2>
      <p><%= @product.price%></p>
      <h3><%= @product.comment %></h3>
      <h4><%= cl_image_tag(@product.photo.key, height: 200, crop: :fill) %></h4>
    <div>

      <%= link_to 'Delete', product_path(@product),
  data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: 'btn btn-danger' %>

  <div data-controller= "toggle">




<button data-action="click->toggle#fire" class="btn btn-outline-primary">Editar el producto</button>
    <div data-toggle-target="togglableElement" class="d-none mt-3">
      <%= form_with(model: @product, url: product_path(@product), method: :patch, data: { controller: "form" }) do |form| %>
        <div class="form-group">
          <%= form.label :name %>
          <%= form.text_field :name, class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= form.label :price %>
          <%= form.number_field :price, step: 0.01, class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= form.label :comment %>
          <%= form.text_area :comment, class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= form.submit "Update Product", class: 'btn btn-primary' %>
        </div>
      <% end %>
    </div>
  </div>


<% else %>

    <div>
      <h2><%= @product.name %></h2>
      <p><%= @product.price%></p>
      <h3><%= @product.comment %></h3>
      <h4><%= cl_image_tag(@product.photo.key, height: 200, crop: :fill) %></h4>
      http://127.0.0.1:3000/products/26
      product_line_items
    </div>
      <%= form_with(url: line_items_path, method: :post) do %>
        <%= hidden_field_tag :product_id, @product.id %>
        <%= label_tag :quantity, "Quantity" %>
        <%= number_field_tag :quantity, 1, min: 1 %>
        <%= submit_tag "Add to Cart" %>
      <% end %>
<% end %>
